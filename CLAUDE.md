# SimpleTitle - Minecraft ç§°å·æ’ä»¶

åŸºäº Folia/Paper çš„ç©å®¶ç§°å·ç³»ç»Ÿæ’ä»¶ï¼Œæ”¯æŒ PlaceholderAPIã€‚

## é¡¹ç›®çŠ¶æ€

### å·²å®ŒæˆåŠŸèƒ½

#### æ ¸å¿ƒåŠŸèƒ½
- [x] ç§°å·ç³»ç»Ÿï¼ˆé¢„è®¾ + è‡ªå®šä¹‰ï¼‰
- [x] åŠ¨æ€ç§°å·æ”¯æŒï¼ˆå¤šå†…å®¹å¾ªç¯æ˜¾ç¤ºï¼‰
- [x] PlaceholderAPI æ‰©å±•ï¼ˆ`%simpletitle_current%` ç­‰ï¼‰
- [x] æ•°æ®åº“æ”¯æŒï¼ˆH2 æœ¬åœ° / MySQL è·¨æœï¼‰
- [x] å¼‚æ­¥æ•°æ®åº“é˜Ÿåˆ—ï¼ˆéé˜»å¡æ“ä½œï¼‰
- [x] ç©å®¶ç¼“å­˜ç³»ç»Ÿï¼ˆæ‡’åŠ è½½ + è§¦å‘åŠ è½½ï¼‰

#### GUI ç³»ç»Ÿ
- [x] ä¸»èœå•ï¼ˆç§°å·åˆ—è¡¨ã€åˆ†é¡µï¼‰
- [x] ç§°å·å•†åº—
- [x] ç§°å·è¯¦æƒ…é¡µï¼ˆä½¿ç”¨ã€åˆ é™¤ã€ä¿®æ”¹è¾¹æ¡†ï¼‰
- [x] è¾¹æ¡†å•†åŸ
- [x] è¾¹æ¡†é€‰æ‹©ç•Œé¢

#### è¾¹æ¡†ç³»ç»Ÿ
- [x] é¢„è®¾è¾¹æ¡†é…ç½®ï¼ˆbrackets.ymlï¼‰
- [x] è¾¹æ¡†è´­ä¹°ï¼ˆé‡‘å¸/ç‚¹åˆ¸ï¼‰
- [x] è¾¹æ¡†æƒé™æ§åˆ¶
- [x] é»˜è®¤è¾¹æ¡†ï¼ˆæ‰€æœ‰ç©å®¶æ‹¥æœ‰ï¼‰
- [x] ä¿®æ”¹ç§°å·è¾¹æ¡†

#### è‡ªå®šä¹‰ç§°å·
- [x] é™æ€ç§°å·åˆ›å»º
- [x] åŠ¨æ€ç§°å·åˆ›å»ºï¼ˆå¤šå†…å®¹å¾ªç¯ï¼‰
- [x] ä¼šè¯ç®¡ç†ï¼ˆå¤šæ­¥éª¤è¾“å…¥ã€è¶…æ—¶ï¼‰
- [x] æ•æ„Ÿè¯è¿‡æ»¤
- [x] èŠå¤©äº‹ä»¶å–æ¶ˆï¼ˆé˜²æ­¢è¾“å…¥æ³„éœ²ï¼‰

#### æ•°æ®å¯¼å…¥
- [x] CSV å¯¼å…¥å‘½ä»¤ï¼ˆ`/title import plt <æ–‡ä»¶å>`ï¼‰
- [x] PLT æ ¼å¼æ”¯æŒ

#### æ•°æ®åº“ä¸å¹¶å‘
- [x] setCurrentTitle äº‹åŠ¡æ”¯æŒ
- [x] è¾¹æ¡†æ“ä½œå›è°ƒç¡®è®¤
- [x] TitleData æ·±æ‹·è´ï¼ˆé¿å…å¯¹è±¡å¼•ç”¨å…±äº«ï¼‰

### å·²ä¿®å¤é—®é¢˜

1. **èŠå¤©æ¶ˆæ¯æ³„éœ²** âœ…
   - è‡ªå®šä¹‰ç§°å·è¾“å…¥æ—¶æ¶ˆæ¯ä¼šè¢«å…¶ä»–ç©å®¶çœ‹åˆ°
   - ä¿®å¤ï¼šæ·»åŠ  `event.viewers().clear()` å’Œç›‘å¬æ—§ç‰ˆ `AsyncPlayerChatEvent`

2. **é¢„è®¾ç§°å·è¾¹æ¡†æ±¡æŸ“** âœ…
   - ä¿®æ”¹è´­ä¹°çš„é¢„è®¾ç§°å·è¾¹æ¡†ä¼šå½±å“å…¶ä»–ç©å®¶
   - ä¿®å¤ï¼šè´­ä¹°æ—¶åˆ›å»º `TitleData.copy()` å‰¯æœ¬

3. **è¾¹æ¡†å•†åŸç¼ºå°‘å¯¼èˆª** âœ…
   - æ²¡æœ‰è¿”å›æŒ‰é’®å’Œè£…é¥°è¾¹æ¡†
   - ä¿®å¤ï¼šé‡æ„ä¸ºç»§æ‰¿ `AbstractGUI`

4. **ä»·æ ¼æ˜¾ç¤ºé—®é¢˜** âœ…
   - `{price}` å ä½ç¬¦æœªæ›¿æ¢
   - ä¿®å¤ï¼šä¼ é€’æ­£ç¡®çš„ price å‚æ•°

### å¾…å¤„ç†/å·²çŸ¥é—®é¢˜

1. **è´­ä¹°æ“ä½œåŸå­æ€§** ğŸŸ¡
   - æ‰£æ¬¾å’Œç»™ç§°å·ä¸æ˜¯åŸå­æ“ä½œ
   - æœ€åæƒ…å†µï¼šç©å®¶æŸå¤±é‡‘å¸ï¼ˆæ¦‚ç‡æä½ï¼‰
   - æš‚ä¸å¤„ç†

## é…ç½®æ–‡ä»¶

- `config.yml` - ä¸»é…ç½®ï¼ˆæ•°æ®åº“ã€è‡ªå®šä¹‰ç§°å·ã€åŠ¨æ€ç§°å·ã€è¾¹è·è®¾ç½®ï¼‰
- `titles.yml` - é¢„è®¾ç§°å·é…ç½®
- `brackets.yml` - é¢„è®¾è¾¹æ¡†é…ç½®
- `messages.yml` - æ¶ˆæ¯é…ç½®

## å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/title` | æ‰“å¼€ç§°å·ä¸»èœå• |
| `/title set <ID>` | è®¾ç½®å½“å‰ç§°å· |
| `/title clear` | æ¸…é™¤å½“å‰ç§°å· |
| `/title list` | æŸ¥çœ‹æ‹¥æœ‰ç§°å· |
| `/title shop` | æ‰“å¼€ç§°å·å•†åº— |
| `/title custom` | åˆ›å»ºè‡ªå®šä¹‰ç§°å· |
| `/title brackets` | æ‰“å¼€è¾¹æ¡†å•†åŸ |
| `/title import plt <æ–‡ä»¶>` | å¯¼å…¥ PLT CSV æ•°æ® |
| `/title reload` | é‡è½½é…ç½® |
| `/title give <ç©å®¶> <ID>` | ç»™äºˆç©å®¶ç§°å· |

## æ•°æ®åº“è¡¨ç»“æ„

### player_titles
- `player_uuid` - ç©å®¶UUID
- `title_id` - ç§°å·ID
- `title_data` - ç§°å·æ•°æ®ï¼ˆJSONï¼‰
- `on_use` - æ˜¯å¦ä½¿ç”¨ä¸­
- `obtained_at` - è·å¾—æ—¶é—´

### player_brackets
- `player_uuid` - ç©å®¶UUID
- `bracket_id` - è¾¹æ¡†ID
- `obtained_at` - è·å¾—æ—¶é—´

## å…³é”®æ–‡ä»¶

```
src/main/java/dev/user/title/
â”œâ”€â”€ SimpleTitlePlugin.java      # ä¸»ç±»
â”œâ”€â”€ command/
â”‚   â””â”€â”€ TitleCommand.java       # å‘½ä»¤å¤„ç†
â”œâ”€â”€ config/
â”‚   â””â”€â”€ ConfigManager.java      # é…ç½®ç®¡ç†
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ DatabaseManager.java    # æ•°æ®åº“è¿æ¥æ± 
â”‚   â”œâ”€â”€ DatabaseQueue.java      # å¼‚æ­¥é˜Ÿåˆ—
â”‚   â””â”€â”€ TitleRepository.java    # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ economy/
â”‚   â”œâ”€â”€ EconomyManager.java     # ç»æµç³»ç»Ÿ
â”‚   â””â”€â”€ PlayerPointsManager.java # ç‚¹åˆ¸ç³»ç»Ÿ
â”œâ”€â”€ gui/
â”‚   â”œâ”€â”€ AbstractGUI.java        # GUI åŸºç±»
â”‚   â”œâ”€â”€ TitleMainGUI.java       # ä¸»èœå•
â”‚   â”œâ”€â”€ TitleShopGUI.java       # å•†åº—
â”‚   â”œâ”€â”€ TitleDetailGUI.java     # è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ BracketShopGUI.java     # è¾¹æ¡†å•†åŸ
â”‚   â””â”€â”€ BracketSelectGUI.java   # è¾¹æ¡†é€‰æ‹©
â”œâ”€â”€ listener/
â”‚   â”œâ”€â”€ PlayerListener.java     # ç©å®¶äº‹ä»¶ï¼ˆèŠå¤©ã€åŠ å…¥/é€€å‡ºï¼‰
â”‚   â””â”€â”€ GUIListener.java        # GUI äº‹ä»¶
â”œâ”€â”€ manager/
â”‚   â”œâ”€â”€ TitleManager.java       # ç§°å·ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ TitleCacheManager.java  # ç§°å·ç¼“å­˜
â”‚   â”œâ”€â”€ BracketManager.java     # è¾¹æ¡†ç®¡ç†
â”‚   â”œâ”€â”€ BracketCacheManager.java # è¾¹æ¡†ç¼“å­˜
â”‚   â”œâ”€â”€ DynamicTitleManager.java # åŠ¨æ€ç§°å·
â”‚   â””â”€â”€ CustomTitleSessionManager.java # è‡ªå®šä¹‰ç§°å·ä¼šè¯
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ TitleData.java          # ç§°å·æ•°æ®æ¨¡å‹ï¼ˆå« copy() æ–¹æ³•ï¼‰
â”‚   â”œâ”€â”€ BracketData.java        # è¾¹æ¡†æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ TitleType.java          # ç§°å·ç±»å‹æšä¸¾
â”œâ”€â”€ placeholder/
â”‚   â””â”€â”€ TitleExpansion.java     # PAPI æ‰©å±•
â””â”€â”€ util/
    â”œâ”€â”€ MessageUtil.java        # æ¶ˆæ¯å·¥å…·
    â””â”€â”€ CsvImporter.java        # CSV å¯¼å…¥å·¥å…·
```

## å¼€å‘æ³¨æ„äº‹é¡¹

1. **Folia å…¼å®¹**ï¼šä½¿ç”¨ `GlobalRegionScheduler` å’Œ `AsyncScheduler`
2. **å¼‚æ­¥æ•°æ®åº“**ï¼šæ‰€æœ‰æ•°æ®åº“æ“ä½œé€šè¿‡ `DatabaseQueue` å¼‚æ­¥æ‰§è¡Œ
3. **ç¼“å­˜æ‡’åŠ è½½**ï¼šæŸ¥è¯¢æ—¶è§¦å‘å¼‚æ­¥åŠ è½½ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
4. **é¢œè‰²ä»£ç **ï¼šä½¿ç”¨ `&` æ ¼å¼ï¼Œé€šè¿‡ `LegacyComponentSerializer.legacyAmpersand()` è§£æ
5. **å¯¹è±¡æ‹·è´**ï¼šè´­ä¹°é¢„è®¾ç§°å·æ—¶å¿…é¡»åˆ›å»ºå‰¯æœ¬ï¼Œé¿å…å¼•ç”¨å…±äº«
6. **èŠå¤©äº‹ä»¶**ï¼šä½¿ç”¨ `LOWEST` ä¼˜å…ˆçº§ + `viewers().clear()` ç¡®ä¿äº‹ä»¶å–æ¶ˆç”Ÿæ•ˆ

## Git æäº¤å†å²

```
7c2f58c docs: æ·»åŠ  README å’Œ MIT License
26ebb19 fix: ä¿®å¤ç§°å·å•†åº—è´­ä¹°å¤±è´¥æ—¶ä»·æ ¼æœªæ­£ç¡®æ˜¾ç¤ºçš„é—®é¢˜
dfceec0 fix: è¾¹æ¡†å•†åŸæ·»åŠ è¿”å›æŒ‰é’®å’Œè£…é¥°è¾¹æ¡†
d848647 fix: ä¿®å¤é¢„è®¾ç§°å·å¯¹è±¡å¼•ç”¨å…±äº«å¯¼è‡´è¾¹æ¡†ä¿®æ”¹äº’ç›¸å½±å“çš„é—®é¢˜
ad87b54 chore: æ·»åŠ  *.csv åˆ° .gitignore
551b879 fix: ä¿®å¤è‡ªå®šä¹‰ç§°å·è¾“å…¥æ—¶èŠå¤©æ¶ˆæ¯æ³„éœ²é—®é¢˜
054ff58 feat: SimpleTitle ç§°å·æ’ä»¶åˆå§‹ç‰ˆæœ¬
```
